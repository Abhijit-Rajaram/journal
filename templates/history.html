{% extends 'base.html' %}
{% block content %}
<h2>History</h2>

{% for day, tasks in tasks_by_day.items() %}
<div class="card mb-3">
    <div class="card-header fw-bold">
        {{ day.strftime('%A, %d %B %Y') }}
    </div>

    <table class="table m-0">
        <thead>
            <tr>
                <th>Status</th>
                <th>Task</th>
                <th>Description</th>
                <th>Completed At</th>
            </tr>
        </thead>

        <tbody>
        {% for t in tasks %}
        <tr class="{% if t.done %}table-success{% endif %}">
            <td>{% if t.done %}✔ Done{% else %}✖{% endif %}</td>
            <td>{{ t.name }}</td>
            <td>{{ t.description }}</td>
            <td>
                {% if t.completed_at %}
                {{ t.completed_at.strftime('%H:%M:%S') }}
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endfor %}

{% if not tasks_by_day %}
<p class="text-muted">No history available.</p>
{% endif %}

{% endblock %}
